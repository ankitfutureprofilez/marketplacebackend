datasource db {
  provider = "postgresql"   
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       Int    @id @default(autoincrement())
  name     String
  email    String @unique
  avatar   String
  password String
  role     Role

  // Relations
  vendor    Vendor?   @relation("VendorUser", fields: [vendorId], references: [id])
  vendorId  Int?
  
  customer  Customer? @relation("CustomerUser", fields: [customerId], references: [id])
  customerId Int?

  admin     Admin?    @relation("AdminUser", fields: [adminId], references: [id])
  adminId   Int?
}

enum Role {
  VENDOR
  CUSTOMER
  ADMIN
}

model Vendor {
  id        Int    @id @default(autoincrement())
  uuid      String @unique
  business_name     String
  city              String
  area              String
  pincode           Int
  category          String?
  subcategory       String?
  business_register String
  pan_card          Boolean  @default(false)
  GST_no            String?
  address           String
  lat               Float?
  long              Float?
  landmark          String?
  adhar_front       String?
  adhar_back        String?
  pan_card_image    String?
  gst_certificate   String?
  shop_license      String?
  business_logo     String?
  store_logo        String?
  opening_hours     String?
  weekly_off_day    String?
  bank_details      String?
  upi_id            String?
  createdAt         DateTime @default(now())

  users     User[] @relation("VendorUser")
}

model Customer {
  id    Int    @id @default(autoincrement())
  // customer fields...

  users User[] @relation("CustomerUser")
}

model Admin {
  id    Int    @id @default(autoincrement())
  // admin fields...

  users User[] @relation("AdminUser")
}